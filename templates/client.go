// Code generated by Fern. DO NOT EDIT.

package templates

import (
	context "context"
	sdk "github.com/payabli/sdk-go"
	core "github.com/payabli/sdk-go/core"
	internal "github.com/payabli/sdk-go/internal"
	option "github.com/payabli/sdk-go/option"
	http "net/http"
)

type Client struct {
	WithRawResponse *RawClient

	baseURL string
	caller  *internal.Caller
	header  http.Header
}

func NewClient(opts ...option.RequestOption) *Client {
	options := core.NewRequestOptions(opts...)
	return &Client{
		WithRawResponse: NewRawClient(options),
		baseURL:         options.BaseURL,
		caller: internal.NewCaller(
			&internal.CallerParams{
				Client:      options.HTTPClient,
				MaxAttempts: options.MaxAttempts,
			},
		),
		header: options.ToHeader(),
	}
}

// Creates a boarding template in an organization.
func (c *Client) AddTemplate(
	ctx context.Context,
	// The numeric identifier for organization, assigned by Payabli.
	orgId int,
	request *sdk.TemplateData,
	opts ...option.RequestOption,
) (*sdk.PayabliApiResponseTemplateId, error) {
	response, err := c.WithRawResponse.AddTemplate(
		ctx,
		orgId,
		request,
		opts...,
	)
	if err != nil {
		return nil, err
	}
	return response.Body, nil
}

// Deletes a template by ID.
func (c *Client) DeleteTemplate(
	ctx context.Context,
	// The boarding template ID. Can be found at the end of the boarding template URL in PartnerHub. Example: `https://partner-sandbox.payabli.com/myorganization/boarding/edittemplate/80`. Here, the template ID is `80`.
	templateId float64,
	opts ...option.RequestOption,
) (*sdk.PayabliApiResponseTemplateId, error) {
	response, err := c.WithRawResponse.DeleteTemplate(
		ctx,
		templateId,
		opts...,
	)
	if err != nil {
		return nil, err
	}
	return response.Body, nil
}

// Generates a boarding link from a boarding template.
func (c *Client) GetlinkTemplate(
	ctx context.Context,
	// Ignore read-only and empty fields Default is `false`. If `ignoreEmpty` = `false` and any field is empty, then the request returns a failure response. If `ignoreEmpty` = `true`, the request returns the boarding link name regardless of whether fields are empty.
	ignoreEmpty bool,
	// The boarding template ID. Can be found at the end of the boarding template URL in PartnerHub. Example: `https://partner-sandbox.payabli.com/myorganization/boarding/edittemplate/80`. Here, the template ID is `80`.
	templateId float64,
	opts ...option.RequestOption,
) (*sdk.BoardingLinkApiResponse, error) {
	response, err := c.WithRawResponse.GetlinkTemplate(
		ctx,
		ignoreEmpty,
		templateId,
		opts...,
	)
	if err != nil {
		return nil, err
	}
	return response.Body, nil
}

// Retrieves a boarding template's details by ID.
func (c *Client) GetTemplate(
	ctx context.Context,
	// The boarding template ID. Can be found at the end of the boarding template URL in PartnerHub. Example: `https://partner-sandbox.payabli.com/myorganization/boarding/edittemplate/80`. Here, the template ID is `80`.
	templateId float64,
	opts ...option.RequestOption,
) (*sdk.TemplateQueryRecord, error) {
	response, err := c.WithRawResponse.GetTemplate(
		ctx,
		templateId,
		opts...,
	)
	if err != nil {
		return nil, err
	}
	return response.Body, nil
}

// Retrieves a list of boarding templates for an organization. Use filters to limit results. You can't make a request that includes filters from the API console in the documentation. The response won't be filtered. Instead, copy the request, remove `parameters=` and run the request in a different client.
func (c *Client) ListTemplates(
	ctx context.Context,
	// The numeric identifier for organization, assigned by Payabli.
	orgId int,
	request *sdk.ListTemplatesRequest,
	opts ...option.RequestOption,
) (*sdk.TemplateQueryResponse, error) {
	response, err := c.WithRawResponse.ListTemplates(
		ctx,
		orgId,
		request,
		opts...,
	)
	if err != nil {
		return nil, err
	}
	return response.Body, nil
}

// Updates a boarding template by ID.
func (c *Client) UpdateTemplate(
	ctx context.Context,
	// The boarding template ID. Can be found at the end of the boarding template URL in PartnerHub. Example: `https://partner-sandbox.payabli.com/myorganization/boarding/edittemplate/80`. Here, the template ID is `80`.
	templateId float64,
	request *sdk.TemplateData,
	opts ...option.RequestOption,
) (*sdk.PayabliApiResponseTemplateId, error) {
	response, err := c.WithRawResponse.UpdateTemplate(
		ctx,
		templateId,
		request,
		opts...,
	)
	if err != nil {
		return nil, err
	}
	return response.Body, nil
}
