// Code generated by Fern. DO NOT EDIT.

package payment_link_test

import (
	bytes "bytes"
	context "context"
	json "encoding/json"
	payabli "github.com/payabli/sdk-go"
	client "github.com/payabli/sdk-go/client"
	option "github.com/payabli/sdk-go/option"
	require "github.com/stretchr/testify/require"
	http "net/http"
	testing "testing"
)

func ResetWireMockRequests(
	t *testing.T,
) {
	WiremockAdminURL := "http://localhost:8080/__admin"
	_, err := http.Post(WiremockAdminURL+"/requests/reset", "application/json", nil)
	require.NoError(t, err)
}

func VerifyRequestCount(
	t *testing.T,
	method string,
	urlPath string,
	queryParams map[string]string,
	expected int,
) {
	WiremockAdminURL := "http://localhost:8080/__admin"
	var reqBody bytes.Buffer
	reqBody.WriteString(`{"method":"`)
	reqBody.WriteString(method)
	reqBody.WriteString(`","urlPath":"`)
	reqBody.WriteString(urlPath)
	reqBody.WriteString(`"}`)
	if len(queryParams) > 0 {
		reqBody.WriteString(`,"queryParameters":{`)
		first := true
		for key, value := range queryParams {
			if !first {
				reqBody.WriteString(",")
			}
			reqBody.WriteString(`"`)
			reqBody.WriteString(key)
			reqBody.WriteString(`":{"equalTo":"`)
			reqBody.WriteString(value)
			reqBody.WriteString(`"}`)
			first = false
		}
		reqBody.WriteString("}")
	}
	resp, err := http.Post(WiremockAdminURL+"/requests/find", "application/json", &reqBody)
	require.NoError(t, err)
	var result struct {
		Requests []interface{} `json:"requests"`
	}
	json.NewDecoder(resp.Body).Decode(&result)
	require.Equal(t, expected, len(result.Requests))
}

func TestPaymentLinkAddPayLinkFromInvoiceWithWireMock(
	t *testing.T,
) {
	ResetWireMockRequests(t)
	WireMockBaseURL := "http://localhost:8080"
	client := client.NewClient(
		option.WithBaseURL(
			WireMockBaseURL,
		),
	)
	request := &payabli.PayLinkDataInvoice{
		Mail2: payabli.String(
			"jo@example.com; ceo@example.com",
		),
		Body: &payabli.PaymentPageRequestBody{
			ContactUs: &payabli.ContactElement{
				EmailLabel: payabli.String(
					"Email",
				),
				Enabled: payabli.Bool(
					true,
				),
				Header: payabli.String(
					"Contact Us",
				),
				Order: payabli.Int(
					0,
				),
				PaymentIcons: payabli.Bool(
					true,
				),
				PhoneLabel: payabli.String(
					"Phone",
				),
			},
			Invoices: &payabli.InvoiceElement{
				Enabled: payabli.Bool(
					true,
				),
				InvoiceLink: &payabli.LabelElement{
					Enabled: payabli.Bool(
						true,
					),
					Label: payabli.String(
						"View Invoice",
					),
					Order: payabli.Int(
						0,
					),
				},
				Order: payabli.Int(
					0,
				),
				ViewInvoiceDetails: &payabli.LabelElement{
					Enabled: payabli.Bool(
						true,
					),
					Label: payabli.String(
						"Invoice Details",
					),
					Order: payabli.Int(
						0,
					),
				},
			},
			Logo: &payabli.Element{
				Enabled: payabli.Bool(
					true,
				),
				Order: payabli.Int(
					0,
				),
			},
			MessageBeforePaying: &payabli.LabelElement{
				Enabled: payabli.Bool(
					true,
				),
				Label: payabli.String(
					"Please review your payment details",
				),
				Order: payabli.Int(
					0,
				),
			},
			Notes: &payabli.NoteElement{
				Enabled: payabli.Bool(
					true,
				),
				Header: payabli.String(
					"Additional Notes",
				),
				Order: payabli.Int(
					0,
				),
				Placeholder: payabli.String(
					"Enter any additional notes here",
				),
				Value: payabli.String(
					"",
				),
			},
			Page: &payabli.PageElement{
				Description: payabli.String(
					"Complete your payment securely",
				),
				Enabled: payabli.Bool(
					true,
				),
				Header: payabli.String(
					"Payment Page",
				),
				Order: payabli.Int(
					0,
				),
			},
			PaymentButton: &payabli.LabelElement{
				Enabled: payabli.Bool(
					true,
				),
				Label: payabli.String(
					"Pay Now",
				),
				Order: payabli.Int(
					0,
				),
			},
			PaymentMethods: &payabli.MethodElement{
				AllMethodsChecked: payabli.Bool(
					true,
				),
				Enabled: payabli.Bool(
					true,
				),
				Header: payabli.String(
					"Payment Methods",
				),
				Methods: &payabli.MethodsList{
					Amex: payabli.Bool(
						true,
					),
					ApplePay: payabli.Bool(
						true,
					),
					Discover: payabli.Bool(
						true,
					),
					ECheck: payabli.Bool(
						true,
					),
					Mastercard: payabli.Bool(
						true,
					),
					Visa: payabli.Bool(
						true,
					),
				},
				Order: payabli.Int(
					0,
				),
				Settings: &payabli.MethodElementSettings{
					ApplePay: &payabli.MethodElementSettingsApplePay{
						ButtonStyle: payabli.MethodElementSettingsApplePayButtonStyleBlack.Ptr(),
						ButtonType:  payabli.MethodElementSettingsApplePayButtonTypePay.Ptr(),
						Language:    payabli.MethodElementSettingsApplePayLanguageEnUs.Ptr(),
					},
				},
			},
			Payor: &payabli.PayorElement{
				Enabled: payabli.Bool(
					true,
				),
				Fields: []*payabli.PayorFields{
					&payabli.PayorFields{
						Display: payabli.Bool(
							true,
						),
						Fixed: payabli.Bool(
							true,
						),
						Identifier: payabli.Bool(
							true,
						),
						Label: payabli.String(
							"Full Name",
						),
						Name: payabli.String(
							"fullName",
						),
						Order: payabli.Int(
							0,
						),
						Required: payabli.Bool(
							true,
						),
						Validation: payabli.String(
							"^[a-zA-Z ]+$",
						),
						Value: payabli.String(
							"",
						),
						Width: payabli.Int(
							0,
						),
					},
				},
				Header: payabli.String(
					"Payor Information",
				),
				Order: payabli.Int(
					0,
				),
			},
			Review: &payabli.HeaderElement{
				Enabled: payabli.Bool(
					true,
				),
				Header: payabli.String(
					"Review Payment",
				),
				Order: payabli.Int(
					0,
				),
			},
			Settings: &payabli.PagelinkSetting{
				Color: payabli.String(
					"#000000",
				),
				CustomCssUrl: payabli.String(
					"https://example.com/custom.css",
				),
				Language: payabli.String(
					"en",
				),
				PageLogo: &payabli.FileContent{
					FContent: payabli.String(
						"PHN2ZyB2aWV3Qm94PSIwIDAgODAwIDEwMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPCEtLSBCYWNrZ3JvdW5kIC0tPgogIDxyZWN0IHdpZHRoPSI4MDAiIGhlaWdodD0iMTAwMCIgZmlsbD0id2hpdGUiLz4KICAKICA8IS0tIENvbXBhbnkgSGVhZGVyIC0tPgogIDx0ZXh0IHg9IjQwIiB5PSI2MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjI0IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzJjM2U1MCI+R3J1enlhIEFkdmVudHVyZSBPdXRmaXR0ZXJzPC90ZXh0PgogIDxsaW5lIHgxPSI0MCIgeTE9IjgwIiB4Mj0iNzYwIiB5Mj0iODAiIHN0cm9rZT0iIzJjM2U1MCIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgCiAgPCEtLSBDb21wYW55IERldGFpbHMgLS0+CiAgPHRleHQgeD0iNDAiIHk9IjExMCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQ0OTVlIj4xMjMgTW91bnRhaW4gVmlldyBSb2FkPC90ZXh0PgogIDx0ZXh0IHg9IjQwIiB5PSIxMzAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0NDk1ZSI+VGJpbGlzaSwgR2VvcmdpYSAwMTA1PC90ZXh0PgogIDx0ZXh0IHg9IjQwIiB5PSIxNTAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0NDk1ZSI+VGVsOiArOTk1IDMyIDEyMyA0NTY3PC90ZXh0PgogIDx0ZXh0IHg9IjQwIiB5PSIxNzAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0NDk1ZSI+RW1haWw6IGluZm9AZ3J1enlhYWR2ZW50dXJlcy5jb208L3RleHQ+CgogIDwhLS0gSW52b2ljZSBUaXRsZSAtLT4KICA8dGV4dCB4PSI2MDAiIHk9IjExMCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjI0IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzJjM2U1MCI+SU5WT0lDRTwvdGV4dD4KICA8dGV4dCB4PSI2MDAiIHk9IjE0MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQ0OTVlIj5EYXRlOiAxMi8xMS8yMDI0PC90ZXh0PgogIDx0ZXh0IHg9IjYwMCIgeT0iMTYwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiMzNDQ5NWUiPkludm9pY2UgIzogR1JaLTIwMjQtMTEyMzwvdGV4dD4KCiAgPCEtLSBCaWxsIFRvIFNlY3Rpb24gLS0+CiAgPHRleHQgeD0iNDAiIHk9IjIyMCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzJjM2U1MCI+QklMTCBUTzo8L3RleHQ+CiAgPHJlY3QgeD0iNDAiIHk9IjIzNSIgd2lkdGg9IjMwMCIgaGVpZ2h0PSI4MCIgZmlsbD0iI2Y3ZjlmYSIvPgogIDx0ZXh0IHg9IjUwIiB5PSIyNjAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0NDk1ZSI+W0N1c3RvbWVyIE5hbWVdPC90ZXh0PgogIDx0ZXh0IHg9IjUwIiB5PSIyODAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0NDk1ZSI+W0FkZHJlc3MgTGluZSAxXTwvdGV4dD4KICA8dGV4dCB4PSI1MCIgeT0iMzAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiMzNDQ5NWUiPltDaXR5LCBDb3VudHJ5XTwvdGV4dD4KCiAgPCEtLSBUYWJsZSBIZWFkZXJzIC0tPgogIDxyZWN0IHg9IjQwIiB5PSIzNDAiIHdpZHRoPSI3MjAiIGhlaWdodD0iMzAiIGZpbGw9IiMyYzNlNTAiLz4KICA8dGV4dCB4PSI1MCIgeT0iMzYwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSJ3aGl0ZSI+RGVzY3JpcHRpb248L3RleHQ+CiAgPHRleHQgeD0iNDUwIiB5PSIzNjAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IndoaXRlIj5RdWFudGl0eTwvdGV4dD4KICA8dGV4dCB4PSI1NTAiIHk9IjM2MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0id2hpdGUiPlJhdGU8L3RleHQ+CiAgPHRleHQgeD0iNjgwIiB5PSIzNjAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IndoaXRlIj5BbW91bnQ8L3RleHQ+CgogIDwhLS0gVGFibGUgUm93cyAtLT4KICA8cmVjdCB4PSI0MCIgeT0iMzcwIiB3aWR0aD0iNzIwIiBoZWlnaHQ9IjMwIiBmaWxsPSIjZjdmOWZhIi8+CiAgPHRleHQgeD0iNTAiIHk9IjM5MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQ0OTVlIj5Nb3VudGFpbiBDbGltYmluZyBFcXVpcG1lbnQgUmVudGFsPC90ZXh0PgogIDx0ZXh0IHg9IjQ1MCIgeT0iMzkwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiMzNDQ5NWUiPjE8L3RleHQ+CiAgPHRleHQgeD0iNTUwIiB5PSIzOTAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0NDk1ZSI+JDI1MC4wMDwvdGV4dD4KICA8dGV4dCB4PSI2ODAiIHk9IjM5MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQ0OTVlIj4kMjUwLjAwPC90ZXh0PgoKICA8cmVjdCB4PSI0MCIgeT0iNDAwIiB3aWR0aD0iNzIwIiBoZWlnaHQ9IjMwIiBmaWxsPSJ3aGl0ZSIvPgogIDx0ZXh0IHg9IjUwIiB5PSI0MjAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0NDk1ZSI+R3VpZGVkIFRyZWsgUGFja2FnZSAtIDIgRGF5czwvdGV4dD4KICA8dGV4dCB4PSI0NTAiIHk9IjQyMCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQ0OTVlIj4xPC90ZXh0PgogIDx0ZXh0IHg9IjU1MCIgeT0iNDIwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiMzNDQ5NWUiPiQ0MDAuMDA8L3RleHQ+CiAgPHRleHQgeD0iNjgwIiB5PSI0MjAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0NDk1ZSI+JDQwMC4wMDwvdGV4dD4KCiAgPHJlY3QgeD0iNDAiIHk9IjQzMCIgd2lkdGg9IjcyMCIgaGVpZ2h0PSIzMCIgZmlsbD0iI2Y3ZjlmYSIvPgogIDx0ZXh0IHg9IjUwIiB5PSI0NTAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0NDk1ZSI+U2FmZXR5IEVxdWlwbWVudCBQYWNrYWdlPC90ZXh0PgogIDx0ZXh0IHg9IjQ1MCIgeT0iNDUwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiMzNDQ5NWUiPjE8L3RleHQ+CiAgPHRleHQgeD0iNTUwIiB5PSI0NTAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0NDk1ZSI+JDE1MC4wMDwvdGV4dD4KICA8dGV4dCB4PSI2ODAiIHk9IjQ1MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQ0OTVlIj4kMTUwLjAwPC90ZXh0PgoKICA8IS0tIFRvdGFscyAtLT4KICA8bGluZSB4MT0iNDAiIHkxPSI0ODAiIHgyPSI3NjAiIHkyPSI0ODAiIHN0cm9rZT0iIzJjM2U1MCIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgPHRleHQgeD0iNTUwIiB5PSI1MTAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiMzNDQ5NWUiPlN1YnRvdGFsOjwvdGV4dD4KICA8dGV4dCB4PSI2ODAiIHk9IjUxMCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQ0OTVlIj4kODAwLjAwPC90ZXh0PgogIDx0ZXh0IHg9IjU1MCIgeT0iNTM1IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjMzQ0OTVlIj5UYXggKDE4JSk6PC90ZXh0PgogIDx0ZXh0IHg9IjY4MCIgeT0iNTM1IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiMzNDQ5NWUiPiQxNDQuMDA8L3RleHQ+CiAgPHRleHQgeD0iNTUwIiB5PSI1NzAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiMyYzNlNTAiPlRvdGFsOjwvdGV4dD4KICA8dGV4dCB4PSI2ODAiIHk9IjU3MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzJjM2U1MCI+JDk0NC4wMDwvdGV4dD4KCiAgPCEtLSBQYXltZW50IFRlcm1zIC0tPgogIDx0ZXh0IHg9IjQwIiB5PSI2NDAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiMyYzNlNTAiPlBheW1lbnQgVGVybXM8L3RleHQ+CiAgPHRleHQgeD0iNDAiIHk9IjY3MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQ0OTVlIj5QYXltZW50IGlzIGR1ZSB3aXRoaW4gMzAgZGF5czwvdGV4dD4KICA8dGV4dCB4PSI0MCIgeT0iNjkwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiMzNDQ5NWUiPlBsZWFzZSBpbmNsdWRlIGludm9pY2UgbnVtYmVyIG9uIHBheW1lbnQ8L3RleHQ+CgogIDwhLS0gQmFuayBEZXRhaWxzIC0tPgogIDx0ZXh0IHg9IjQwIiB5PSI3MzAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiMyYzNlNTAiPkJhbmsgRGV0YWlsczwvdGV4dD4KICA8dGV4dCB4PSI0MCIgeT0iNzYwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiMzNDQ5NWUiPkJhbms6IEJhbmsgb2YgR2VvcmdpYTwvdGV4dD4KICA8dGV4dCB4PSI0MCIgeT0iNzgwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiMzNDQ5NWUiPklCQU46IEdFMTIzNDU2Nzg5MDEyMzQ1Njc4PC90ZXh0PgogIDx0ZXh0IHg9IjQwIiB5PSI4MDAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0NDk1ZSI+U1dJRlQ6IEJBR0FHRTIyPC90ZXh0PgoKICA8IS0tIEZvb3RlciAtLT4KICA8bGluZSB4MT0iNDAiIHkxPSI5MDAiIHgyPSI3NjAiIHkyPSI5MDAiIHN0cm9rZT0iIzJjM2U1MCIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgPHRleHQgeD0iNDAiIHk9IjkzMCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIiBmaWxsPSIjN2Y4YzhkIj5UaGFuayB5b3UgZm9yIGNob29zaW5nIEdydXp5YSBBZHZlbnR1cmUgT3V0Zml0dGVyczwvdGV4dD4KICA8dGV4dCB4PSI0MCIgeT0iOTUwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiM3ZjhjOGQiPnd3dy5ncnV6eWFhZHZlbnR1cmVzLmNvbTwvdGV4dD4KPC9zdmc+Cg==",
					),
					Filename: payabli.String(
						"logo.jpg",
					),
					Ftype: payabli.FileContentFtypeJpg.Ptr(),
					Furl: payabli.String(
						"",
					),
				},
				RedirectAfterApprove: payabli.Bool(
					true,
				),
				RedirectAfterApproveUrl: payabli.String(
					"https://example.com/success",
				),
			},
		},
	}
	_, invocationErr := client.PaymentLink.AddPayLinkFromInvoice(
		context.TODO(),
		23548884,
		request,
	)

	require.NoError(t, invocationErr, "Client method call should succeed")
	VerifyRequestCount(t, "POST", "/PaymentLink/23548884", map[string]string{"mail2": "jo@example.com; ceo@example.com"}, 1)
}

func TestPaymentLinkAddPayLinkFromBillWithWireMock(
	t *testing.T,
) {
	ResetWireMockRequests(t)
	WireMockBaseURL := "http://localhost:8080"
	client := client.NewClient(
		option.WithBaseURL(
			WireMockBaseURL,
		),
	)
	request := &payabli.PayLinkDataBill{
		Mail2: payabli.String(
			"jo@example.com; ceo@example.com",
		),
		Body: &payabli.PaymentPageRequestBody{
			ContactUs: &payabli.ContactElement{
				EmailLabel: payabli.String(
					"Email",
				),
				Enabled: payabli.Bool(
					true,
				),
				Header: payabli.String(
					"Contact Us",
				),
				Order: payabli.Int(
					0,
				),
				PaymentIcons: payabli.Bool(
					true,
				),
				PhoneLabel: payabli.String(
					"Phone",
				),
			},
			Logo: &payabli.Element{
				Enabled: payabli.Bool(
					true,
				),
				Order: payabli.Int(
					0,
				),
			},
			MessageBeforePaying: &payabli.LabelElement{
				Enabled: payabli.Bool(
					true,
				),
				Label: payabli.String(
					"Please review your payment details",
				),
				Order: payabli.Int(
					0,
				),
			},
			Notes: &payabli.NoteElement{
				Enabled: payabli.Bool(
					true,
				),
				Header: payabli.String(
					"Additional Notes",
				),
				Order: payabli.Int(
					0,
				),
				Placeholder: payabli.String(
					"Enter any additional notes here",
				),
				Value: payabli.String(
					"",
				),
			},
			Page: &payabli.PageElement{
				Description: payabli.String(
					"Get paid securely",
				),
				Enabled: payabli.Bool(
					true,
				),
				Header: payabli.String(
					"Payment Page",
				),
				Order: payabli.Int(
					0,
				),
			},
			PaymentButton: &payabli.LabelElement{
				Enabled: payabli.Bool(
					true,
				),
				Label: payabli.String(
					"Pay Now",
				),
				Order: payabli.Int(
					0,
				),
			},
			PaymentMethods: &payabli.MethodElement{
				AllMethodsChecked: payabli.Bool(
					true,
				),
				Enabled: payabli.Bool(
					true,
				),
				Header: payabli.String(
					"Payment Methods",
				),
				Methods: &payabli.MethodsList{
					Amex: payabli.Bool(
						true,
					),
					ApplePay: payabli.Bool(
						true,
					),
					Discover: payabli.Bool(
						true,
					),
					ECheck: payabli.Bool(
						true,
					),
					Mastercard: payabli.Bool(
						true,
					),
					Visa: payabli.Bool(
						true,
					),
				},
				Order: payabli.Int(
					0,
				),
			},
			Payor: &payabli.PayorElement{
				Enabled: payabli.Bool(
					true,
				),
				Fields: []*payabli.PayorFields{
					&payabli.PayorFields{
						Display: payabli.Bool(
							true,
						),
						Fixed: payabli.Bool(
							true,
						),
						Identifier: payabli.Bool(
							true,
						),
						Label: payabli.String(
							"Full Name",
						),
						Name: payabli.String(
							"fullName",
						),
						Order: payabli.Int(
							0,
						),
						Required: payabli.Bool(
							true,
						),
						Validation: payabli.String(
							"^[a-zA-Z ]+$",
						),
						Value: payabli.String(
							"",
						),
						Width: payabli.Int(
							0,
						),
					},
				},
				Header: payabli.String(
					"Payor Information",
				),
				Order: payabli.Int(
					0,
				),
			},
			Review: &payabli.HeaderElement{
				Enabled: payabli.Bool(
					true,
				),
				Header: payabli.String(
					"Review Payment",
				),
				Order: payabli.Int(
					0,
				),
			},
			Settings: &payabli.PagelinkSetting{
				Color: payabli.String(
					"#000000",
				),
				Language: payabli.String(
					"en",
				),
			},
		},
	}
	_, invocationErr := client.PaymentLink.AddPayLinkFromBill(
		context.TODO(),
		23548884,
		request,
	)

	require.NoError(t, invocationErr, "Client method call should succeed")
	VerifyRequestCount(t, "POST", "/PaymentLink/bill/23548884", map[string]string{"mail2": "jo@example.com; ceo@example.com"}, 1)
}

func TestPaymentLinkDeletePayLinkFromIdWithWireMock(
	t *testing.T,
) {
	ResetWireMockRequests(t)
	WireMockBaseURL := "http://localhost:8080"
	client := client.NewClient(
		option.WithBaseURL(
			WireMockBaseURL,
		),
	)
	_, invocationErr := client.PaymentLink.DeletePayLinkFromId(
		context.TODO(),
		"payLinkId",
	)

	require.NoError(t, invocationErr, "Client method call should succeed")
	VerifyRequestCount(t, "DELETE", "/PaymentLink/payLinkId", nil, 1)
}

func TestPaymentLinkGetPayLinkFromIdWithWireMock(
	t *testing.T,
) {
	ResetWireMockRequests(t)
	WireMockBaseURL := "http://localhost:8080"
	client := client.NewClient(
		option.WithBaseURL(
			WireMockBaseURL,
		),
	)
	_, invocationErr := client.PaymentLink.GetPayLinkFromId(
		context.TODO(),
		"paylinkId",
	)

	require.NoError(t, invocationErr, "Client method call should succeed")
	VerifyRequestCount(t, "GET", "/PaymentLink/load/paylinkId", nil, 1)
}

func TestPaymentLinkPushPayLinkFromIdWithWireMock(
	t *testing.T,
) {
	ResetWireMockRequests(t)
	WireMockBaseURL := "http://localhost:8080"
	client := client.NewClient(
		option.WithBaseURL(
			WireMockBaseURL,
		),
	)
	request := &payabli.PushPayLinkRequest{
		Sms: &payabli.PushPayLinkRequestSms{},
	}
	_, invocationErr := client.PaymentLink.PushPayLinkFromId(
		context.TODO(),
		"payLinkId",
		request,
	)

	require.NoError(t, invocationErr, "Client method call should succeed")
	VerifyRequestCount(t, "POST", "/PaymentLink/push/payLinkId", nil, 1)
}

func TestPaymentLinkRefreshPayLinkFromIdWithWireMock(
	t *testing.T,
) {
	ResetWireMockRequests(t)
	WireMockBaseURL := "http://localhost:8080"
	client := client.NewClient(
		option.WithBaseURL(
			WireMockBaseURL,
		),
	)
	request := &payabli.RefreshPayLinkFromIdRequest{}
	_, invocationErr := client.PaymentLink.RefreshPayLinkFromId(
		context.TODO(),
		"payLinkId",
		request,
	)

	require.NoError(t, invocationErr, "Client method call should succeed")
	VerifyRequestCount(t, "GET", "/PaymentLink/refresh/payLinkId", nil, 1)
}

func TestPaymentLinkSendPayLinkFromIdWithWireMock(
	t *testing.T,
) {
	ResetWireMockRequests(t)
	WireMockBaseURL := "http://localhost:8080"
	client := client.NewClient(
		option.WithBaseURL(
			WireMockBaseURL,
		),
	)
	request := &payabli.SendPayLinkFromIdRequest{
		Mail2: payabli.String(
			"jo@example.com; ceo@example.com",
		),
	}
	_, invocationErr := client.PaymentLink.SendPayLinkFromId(
		context.TODO(),
		"payLinkId",
		request,
	)

	require.NoError(t, invocationErr, "Client method call should succeed")
	VerifyRequestCount(t, "GET", "/PaymentLink/send/payLinkId", map[string]string{"mail2": "jo@example.com; ceo@example.com"}, 1)
}

func TestPaymentLinkUpdatePayLinkFromIdWithWireMock(
	t *testing.T,
) {
	ResetWireMockRequests(t)
	WireMockBaseURL := "http://localhost:8080"
	client := client.NewClient(
		option.WithBaseURL(
			WireMockBaseURL,
		),
	)
	request := &payabli.PayLinkUpdateData{
		Notes: &payabli.NoteElement{
			Enabled: payabli.Bool(
				true,
			),
			Header: payabli.String(
				"Additional Notes",
			),
			Order: payabli.Int(
				0,
			),
			Placeholder: payabli.String(
				"Enter any additional notes here",
			),
			Value: payabli.String(
				"",
			),
		},
		PaymentButton: &payabli.LabelElement{
			Enabled: payabli.Bool(
				true,
			),
			Label: payabli.String(
				"Pay Now",
			),
			Order: payabli.Int(
				0,
			),
		},
	}
	_, invocationErr := client.PaymentLink.UpdatePayLinkFromId(
		context.TODO(),
		"332-c277b704-1301",
		request,
	)

	require.NoError(t, invocationErr, "Client method call should succeed")
	VerifyRequestCount(t, "PUT", "/PaymentLink/update/332-c277b704-1301", nil, 1)
}

func TestPaymentLinkAddPayLinkFromBillLotNumberWithWireMock(
	t *testing.T,
) {
	ResetWireMockRequests(t)
	WireMockBaseURL := "http://localhost:8080"
	client := client.NewClient(
		option.WithBaseURL(
			WireMockBaseURL,
		),
	)
	request := &payabli.PayLinkDataOut{
		EntryPoint:   "billing",
		VendorNumber: "VENDOR-123",
		Mail2: payabli.String(
			"customer@example.com; billing@example.com",
		),
		AmountFixed: payabli.String(
			"true",
		),
		Body: &payabli.PaymentPageRequestBody{
			ContactUs: &payabli.ContactElement{
				EmailLabel: payabli.String(
					"Email",
				),
				Enabled: payabli.Bool(
					true,
				),
				Header: payabli.String(
					"Contact Us",
				),
				Order: payabli.Int(
					0,
				),
				PaymentIcons: payabli.Bool(
					true,
				),
				PhoneLabel: payabli.String(
					"Phone",
				),
			},
			Logo: &payabli.Element{
				Enabled: payabli.Bool(
					true,
				),
				Order: payabli.Int(
					0,
				),
			},
			MessageBeforePaying: &payabli.LabelElement{
				Enabled: payabli.Bool(
					true,
				),
				Label: payabli.String(
					"Please review your payment details",
				),
				Order: payabli.Int(
					0,
				),
			},
			Notes: &payabli.NoteElement{
				Enabled: payabli.Bool(
					true,
				),
				Header: payabli.String(
					"Additional Notes",
				),
				Order: payabli.Int(
					0,
				),
				Placeholder: payabli.String(
					"Enter any additional notes here",
				),
				Value: payabli.String(
					"",
				),
			},
			Page: &payabli.PageElement{
				Description: payabli.String(
					"Get paid securely",
				),
				Enabled: payabli.Bool(
					true,
				),
				Header: payabli.String(
					"Payment Page",
				),
				Order: payabli.Int(
					0,
				),
			},
			PaymentButton: &payabli.LabelElement{
				Enabled: payabli.Bool(
					true,
				),
				Label: payabli.String(
					"Pay Now",
				),
				Order: payabli.Int(
					0,
				),
			},
			PaymentMethods: &payabli.MethodElement{
				AllMethodsChecked: payabli.Bool(
					true,
				),
				Enabled: payabli.Bool(
					true,
				),
				Header: payabli.String(
					"Payment Methods",
				),
				Methods: &payabli.MethodsList{
					Amex: payabli.Bool(
						true,
					),
					ApplePay: payabli.Bool(
						true,
					),
					Discover: payabli.Bool(
						true,
					),
					ECheck: payabli.Bool(
						true,
					),
					Mastercard: payabli.Bool(
						true,
					),
					Visa: payabli.Bool(
						true,
					),
				},
				Order: payabli.Int(
					0,
				),
			},
			Payor: &payabli.PayorElement{
				Enabled: payabli.Bool(
					true,
				),
				Fields: []*payabli.PayorFields{
					&payabli.PayorFields{
						Display: payabli.Bool(
							true,
						),
						Fixed: payabli.Bool(
							true,
						),
						Identifier: payabli.Bool(
							true,
						),
						Label: payabli.String(
							"Full Name",
						),
						Name: payabli.String(
							"fullName",
						),
						Order: payabli.Int(
							0,
						),
						Required: payabli.Bool(
							true,
						),
						Validation: payabli.String(
							"^[a-zA-Z ]+$",
						),
						Value: payabli.String(
							"",
						),
						Width: payabli.Int(
							0,
						),
					},
				},
				Header: payabli.String(
					"Payor Information",
				),
				Order: payabli.Int(
					0,
				),
			},
			Review: &payabli.HeaderElement{
				Enabled: payabli.Bool(
					true,
				),
				Header: payabli.String(
					"Review Payment",
				),
				Order: payabli.Int(
					0,
				),
			},
			Settings: &payabli.PagelinkSetting{
				Color: payabli.String(
					"#000000",
				),
				Language: payabli.String(
					"en",
				),
			},
		},
	}
	_, invocationErr := client.PaymentLink.AddPayLinkFromBillLotNumber(
		context.TODO(),
		"LOT-2024-001",
		request,
	)

	require.NoError(t, invocationErr, "Client method call should succeed")
	VerifyRequestCount(t, "POST", "/PaymentLink/bill/lotNumber/LOT-2024-001", map[string]string{"entryPoint": "billing", "vendorNumber": "VENDOR-123", "mail2": "customer@example.com; billing@example.com", "amountFixed": "true"}, 1)
}
